<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Style Sheets</title>
    <link id="stylelink" rel="stylesheet" href="redtheme.css">

    <style>
        html{
            color-scheme: dark;
        }
        h1{text-align: center;}
        #selstylesheet{
            position: absolute;
            top: 10px;
            right: 10px;
        }
    </style>
</head>
<body>
    <h1>Dynamic Style Sheets</h1>
    <select name="selstyle" id="selstylesheet" onchange="updateStyleSheet()">

        <!-- <option>None</option> -->
        <option value="redtheme.css">Red Theme</option>
        <option value="bluetheme.css">Blue Theme</option>
        <option value="purpletheme.css">Purple Theme</option>
        <option value="pinktheme.css">Pink Theme</option>
    </select>

    <script>
        let selStylesheet;
        selStylesheet = document.querySelector("#selstylesheet");
        // alert(selStyle);

        // Select the link to external stylesheet
        let styleLink;
        styleLink = document.querySelector("#stylelink");
        // alert(styleLink);

        function updateStyleSheet(){
            // alert(selStyle.value);
            styleLink.href = selStylesheet.value;

            // Save to local storage
            localStorage.setItem('selectedStylesheet2008', selStylesheet.value)
        };
        
        window.addEventListener('load',function(){
            let savedStylesheet = localStorage.getItem('selectedStylesheet2008');
            // alert(savedStylesheet)
            if(savedStylesheet !== null){
                // Link to the saved styleSheet
                styleLink.href = savedStylesheet;
                // Match the dropbox box (select) to saved stylesheet
                selStylesheet.value = savedStylesheet
            };
        });
    </script>
</body>
</html>